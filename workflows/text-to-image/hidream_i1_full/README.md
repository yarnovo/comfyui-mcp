# HiDream i1 Full 文生图工作流

## 概述

这是一个使用 HiDream i1 Full 模型的高级文生图工作流。HiDream i1 是基于 SD3 架构的最新一代文生图模型，通过集成四重 CLIP 编码器（CLIP-L、CLIP-G、T5-XXL、LLaMA 3.1 8B）实现了卓越的文本理解和图像生成能力。

## 工作流特点

- **四重文本编码器**：集成 CLIP-L、CLIP-G、T5-XXL 和 LLaMA 3.1，提供多层次的语义理解
- **SD3 架构优势**：采用最新的 Stable Diffusion 3 架构，生成质量显著提升
- **高分辨率支持**：原生支持 1024x1024 及更高分辨率输出
- **FP8 优化**：模型采用 FP8 量化，在保持质量的同时大幅降低显存占用
- **灵活的采样控制**：支持多种采样器和调度器，可精细调节生成效果

## 主要参数

| 参数名 | 类型 | 默认值 | 说明 |
|--------|------|---------|------|
| positive_prompt | string | - | 正向提示词，描述想要生成的内容（必填） |
| negative_prompt | string | null | 负向提示词，描述不想要的内容 |
| width | number | 1024 | 图像宽度（像素） |
| height | number | 1024 | 图像高度（像素） |
| batch_size | number | 1 | 批次大小 |
| seed | number | 434414617479586 | 随机种子，-1为随机 |
| steps | number | 50 | 采样步数（30-50推荐） |
| cfg | number | 5 | CFG强度（4-7推荐） |
| sampler_name | string | uni_pc | 采样器类型 |
| scheduler | string | simple | 调度器类型 |
| shift | number | 3.0 | SD3采样偏移值（2-4推荐） |

## 使用示例

### 基础使用

```python
result = await run_text_to_image_workflow_hidream_i1_full(
    positive_prompt="一位穿着多层次服装的未来派人物，柔和的顶光照明，极简主义风格，工作室灯光，正面视角"
)
```

### 高级定制

```python
result = await run_text_to_image_workflow_hidream_i1_full(
    positive_prompt="赛博朋克城市夜景，霓虹灯光，雨天反射，高细节，电影级构图",
    negative_prompt="模糊，低质量，变形，过度曝光",
    width=1536,
    height=1024,
    steps=40,
    cfg=6,
    seed=12345
)
```

### 批量生成

```python
result = await run_text_to_image_workflow_hidream_i1_full(
    positive_prompt="概念艺术，奇幻风景，魔法森林，发光的植物，神秘氛围",
    batch_size=4,
    seed=-1  # 随机种子生成不同变体
)
```

## 提示词建议

### 有效的提示词结构

1. **主体描述**：清晰定义画面主体
2. **环境/背景**：描述场景和环境
3. **光线效果**：指定光源和照明风格
4. **艺术风格**：添加风格标签（如"极简主义"、"工作室照明"）
5. **视角/构图**：指定拍摄角度和构图方式

### 示例提示词

**人物肖像**：
```
"专业人像摄影，柔和的伦勃朗光，浅景深，细腻的皮肤纹理，自然表情，85mm镜头"
```

**概念艺术**：
```
"未来城市天际线，黄金时刻，体积光，大气透视，科幻美学，电影级构图"
```

**产品渲染**：
```
"产品摄影，白色背景，柔和阴影，工作室照明，高端质感，商业摄影风格"
```

## 参数调优指南

### CFG 强度调节
- **3-4**：更自由的创意发挥，可能偏离提示词
- **5-6**：平衡的效果（推荐）
- **7-8**：严格遵循提示词，可能过度饱和

### 采样步数优化
- **20-30步**：快速预览，质量尚可
- **40-50步**：高质量输出（推荐）
- **60+步**：极致细节，但收益递减

### Shift 参数（SD3特有）
- **1-2**：保守生成，细节较少
- **3**：平衡效果（默认）
- **4-5**：增强细节和对比度

## 注意事项

1. **显存要求**：虽然使用了 FP8 优化，但四重编码器仍需要较多显存（建议 12GB+）
2. **提示词长度**：支持长文本输入，但过长可能影响生成速度
3. **分辨率选择**：建议使用 1024 的倍数以获得最佳效果
4. **负向提示词**：合理使用负向提示词可以显著提升生成质量

## 常见问题

**Q: 为什么生成速度较慢？**
A: 四重 CLIP 编码器提供了更好的文本理解，但也增加了计算量。可以适当减少采样步数来加速。

**Q: 如何获得更艺术化的效果？**
A: 尝试调整 shift 参数到 4-5，并在提示词中加入具体的艺术风格描述。

**Q: 批量生成时如何保持一致性？**
A: 使用固定的种子值，仅通过微调提示词来创建变体。