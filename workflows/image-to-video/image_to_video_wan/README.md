# WAN 2.1 图像转视频工作流

## 概述
使用 WAN 2.1 模型将静态图像转换为动态视频，支持根据文本提示生成自然流畅的动画效果。

## 工作流特点
- **模型**: WAN 2.1 14B FP16 优化版
- **CLIP模型**: UMT5 XXL FP8 + CLIP Vision H
- **VAE**: WAN 2.1 专用 VAE
- **分辨率**: 支持256-1024像素
- **视频长度**: 16-128帧
- **帧率**: 8-60 FPS

## 主要参数

### 必需参数
- **positive_prompt**: 描述视频中的动作和场景变化
- **input_image**: 输入静态图片的绝对路径

### 视频设置
- **width/height**: 视频分辨率（默认512x512）
- **length**: 视频帧数（默认33帧）
- **fps**: 视频帧率（默认16 FPS）

### 生成控制
- **negative_prompt**: 排除不需要的动作或效果
- **steps**: 采样步数（默认20）
- **cfg**: 提示词引导强度（默认6）
- **denoise**: 去噪强度（默认1）
- **shift**: SD3算法偏移值（默认8）
- **seed**: 随机种子

### 输出设置
- **filename_prefix**: 输出文件路径前缀
- **video_format**: 视频格式（auto/mp4/webm/avi）
- **codec**: 视频编码器（auto/h264/h265/vp9）

## 使用示例

### 角色动画
```python
params = {
    "input_image": "/path/to/character.png",
    "positive_prompt": "角色转身，头发飘动，自然的动作过渡",
    "negative_prompt": "静止，模糊，不自然的动作",
    "length": 48,
    "fps": 24
}
```

### 风景动画
```python
params = {
    "input_image": "/path/to/landscape.jpg",
    "positive_prompt": "云朵缓慢飘动，树叶轻轻摇曳，水面波光粼粼",
    "negative_prompt": "快速移动，剧烈晃动",
    "width": 768,
    "height": 432,
    "length": 64
}
```

### 物体动画
```python
params = {
    "input_image": "/path/to/object.png",
    "positive_prompt": "360度旋转展示，平滑的转动",
    "negative_prompt": "跳跃，不连贯",
    "cfg": 8,
    "steps": 30
}
```

## 提示词技巧

### 动作描述
1. **具体动作**: "转身"、"挥手"、"行走"等
2. **动作速度**: "缓慢"、"快速"、"平滑"等
3. **动作方向**: "向左"、"向右"、"顺时针"等
4. **动作幅度**: "轻微"、"大幅"、"细微"等

### 场景变化
1. **光线变化**: "日出到日落"、"阴影移动"
2. **天气变化**: "晴转多云"、"风吹过"
3. **环境互动**: "水波荡漾"、"树叶飘落"

### 负向提示词建议
- 避免静态：静止、不动、冻结
- 避免瑕疵：模糊、扭曲、变形
- 避免不自然：跳跃、闪烁、不连贯
- 避免干扰：字幕、水印、文字

## 参数优化建议

### 分辨率选择
- **512x512**: 标准质量，生成速度快
- **768x432**: 16:9宽屏格式
- **1024x576**: 高清16:9格式
- **720x720**: 高质量正方形格式

### 帧数与时长
- **16-24帧**: 短循环动画（1-1.5秒）
- **32-48帧**: 标准动画（2-3秒）
- **64-96帧**: 长动画（4-6秒）
- **128帧**: 最长动画（8秒）

### CFG与Steps平衡
- **低CFG (3-5)**: 更自由的动作，可能偏离提示
- **中CFG (6-8)**: 平衡的效果（推荐）
- **高CFG (9-12)**: 严格遵循提示，可能过于僵硬

## 常见应用场景
1. **产品展示**: 360度旋转展示
2. **角色动画**: 表情、动作、姿态变化
3. **场景动画**: 自然环境动态化
4. **创意特效**: 变形、转换、魔法效果
5. **教育演示**: 过程展示、原理动画

## 输出说明
- 视频默认保存在 `video/` 子目录
- 支持多种视频格式输出
- 保持输入图片的宽高比
- 自动优化编码参数

## 注意事项
1. 输入图片质量直接影响输出效果
2. 复杂动作可能需要更多步数
3. 过长的视频可能需要更多显存
4. 建议先用低分辨率测试效果