# 图生图工作流

## 概述
将输入图片根据提示词转换为新的图片，支持风格转换、内容修改等多种图像编辑操作。

## 工作流特点
- **模型**: Stable Diffusion v1.5 FP16优化版
- **支持格式**: 支持常见图片格式（PNG、JPG等）
- **智能缩放**: 自动调整图像大小以优化处理速度
- **灵活控制**: 通过去噪强度精确控制变化程度

## 主要参数

### 必需参数
- **input_image**: 输入图片的绝对路径

### 核心参数
- **positive_prompt**: 正向提示词，描述目标图像的特征
- **negative_prompt**: 负向提示词，排除不需要的元素
- **denoise**: 去噪强度（0-1）
  - 0.0-0.3: 轻微修改，保持原图主体
  - 0.4-0.7: 中等修改，风格转换
  - 0.8-1.0: 大幅修改，接近重新生成

### 生成控制
- **steps**: 采样步数（默认20）
- **cfg**: CFG强度（默认8）
- **seed**: 随机种子（-1为随机）
- **sampler_name**: 采样器（默认dpmpp_2m）
- **scheduler**: 调度器（默认normal）

### 图像设置
- **megapixels**: 处理分辨率（默认0.25百万像素）
- **checkpoint**: 使用的模型文件
- **filename_prefix**: 输出文件名前缀

## 使用示例

### 风格转换
```python
params = {
    "input_image": "/path/to/photo.jpg",
    "positive_prompt": "油画风格，印象派，梵高画风",
    "negative_prompt": "照片，真实，摄影",
    "denoise": 0.6,
    "cfg": 7
}
```

### 细节增强
```python
params = {
    "input_image": "/path/to/image.png",
    "positive_prompt": "高清晰度，锐利细节，专业摄影",
    "negative_prompt": "模糊，低质量",
    "denoise": 0.3,
    "steps": 30
}
```

### 场景修改
```python
params = {
    "input_image": "/path/to/portrait.jpg",
    "positive_prompt": "夏季花园背景，阳光明媚",
    "negative_prompt": "室内，黑暗",
    "denoise": 0.8,
    "cfg": 10
}
```

## 使用技巧

### 去噪强度选择
- **微调（0.1-0.3）**: 颜色校正、光线调整、细节增强
- **中等（0.4-0.6）**: 风格转换、背景替换、服装更改
- **重绘（0.7-1.0）**: 大幅改变构图、完全重新诠释

### 提示词建议
1. **保持一致性**: 提示词应与原图主体相关
2. **具体描述**: 使用具体的风格、颜色、材质描述
3. **平衡正负**: 合理使用负向提示词排除不需要的元素
4. **迭代优化**: 从低去噪开始，逐步调整找到最佳效果

### 分辨率优化
- 低分辨率（0.25MP）: 快速预览和测试
- 中分辨率（0.5-1MP）: 平衡质量和速度
- 高分辨率（>1MP）: 最终输出品质

## 常见应用场景
1. **艺术风格转换**: 将照片转换为各种艺术风格
2. **背景替换**: 更改图片背景环境
3. **季节转换**: 改变图片的季节氛围
4. **时代转换**: 将现代照片转为复古风格
5. **细节修复**: 增强图片细节和清晰度

## 输出
生成的图像保存在 ComfyUI 输出目录，保留原始尺寸比例。